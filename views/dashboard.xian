{{> head}}
<body class="min-h-screen relative">
  <!-- Background Image with Overlay -->
  <div class="fixed inset-0 z-0">
    <img src="https://i.ytimg.com/vi/GNAkv2CTl_8/maxresdefault.jpg" alt="Beach Background" class="w-full h-full object-cover">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-cyan-900/50 to-teal-900/50 backdrop-blur-[2px]"></div>
  </div>
  
  <!-- Content Wrapper -->
  <div class="relative z-10">
    {{> navbar}}

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Welcome Section with Animation -->
    <div class="relative bg-gradient-to-r from-blue-600 via-cyan-600 to-teal-600 rounded-2xl shadow-2xl p-8 mb-8 text-white overflow-hidden">
      <!-- Animated Background Pattern -->
      <div class="absolute inset-0 opacity-10">
        <div class="wave-pattern"></div>
      </div>
      
      <div class="relative z-10 flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="text-center md:text-left">
          <h2 class="text-4xl font-bold mb-2 animate-fade-in">Welcome back, {{userName}}! ğŸ‘‹</h2>
          <p class="text-blue-100 text-lg">Ready to plan your next beach getaway?</p>
          <div class="mt-4 flex flex-wrap gap-2 justify-center md:justify-start">
            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm backdrop-blur-sm">ğŸŒŠ Beach Paradise</span>
            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm backdrop-blur-sm">ğŸï¸ Island Tours</span>
            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm backdrop-blur-sm">ğŸ£ Water Sports</span>
          </div>
        </div>
        {{#if (eq userRole 'admin')}}
          <a href="/admin/dashboard" class="bg-purple-600 hover:bg-purple-700 text-white px-8 py-4 rounded-xl font-semibold transition transform hover:scale-105 shadow-lg hover:shadow-xl">
            ğŸ‘‘ Admin Panel
          </a>
        {{/if}}
      </div>
    </div>

    <style>
      @keyframes wave {
        0% { transform: translateX(0) translateY(0); }
        50% { transform: translateX(-25%) translateY(-10px); }
        100% { transform: translateX(0) translateY(0); }
      }
      
      .wave-pattern {
        background-image: 
          radial-gradient(circle at 20% 50%, rgba(255,255,255,0.2) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(255,255,255,0.2) 0%, transparent 50%),
          radial-gradient(circle at 40% 20%, rgba(255,255,255,0.2) 0%, transparent 50%);
        animation: wave 15s ease-in-out infinite;
        height: 100%;
        width: 200%;
      }
      
      @keyframes fade-in {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .animate-fade-in {
        animation: fade-in 0.6s ease-out;
      }
      
      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }
      
      .float-animation {
        animation: float 3s ease-in-out infinite;
      }
      
      @keyframes pulse-glow {
        0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        50% { box-shadow: 0 0 40px rgba(59, 130, 246, 0.8); }
      }
      
      .pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
      }
    </style>

    {{#if success_msg}}
      <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg mb-6 shadow-md animate-pulse">
        <div class="flex items-center">
          <span class="text-4xl mr-4">âœ…</span>
          <div>
            <h3 class="text-lg font-bold text-green-800 mb-1">Success!</h3>
            <p class="text-green-700">{{success_msg}}</p>
          </div>
        </div>
      </div>
    {{/if}}

    {{#if error_msg}}
      <div class="bg-red-50 border-l-4 border-red-500 p-6 rounded-lg mb-6 shadow-md">
        <div class="flex items-center">
          <span class="text-4xl mr-4">âŒ</span>
          <div>
            <h3 class="text-lg font-bold text-red-800 mb-1">Error</h3>
            <p class="text-red-700">{{error_msg}}</p>
          </div>
        </div>
      </div>
    {{/if}}

    <!-- Quick Stats with Enhanced Design -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <!-- My Bookings Card -->
      <div class="group bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-white relative overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative z-10">
          <div class="flex items-center justify-between mb-4">
            <div class="bg-white bg-opacity-20 p-3 rounded-xl backdrop-blur-sm float-animation">
              <span class="text-4xl">ğŸ“…</span>
            </div>
            <div class="text-right">
              <p class="text-blue-100 text-sm font-semibold">My Bookings</p>
              <p class="text-4xl font-bold mt-1" id="totalBookings">0</p>
            </div>
          </div>
          <div class="pt-4 border-t border-white border-opacity-20">
            <p class="text-blue-100 text-sm" id="bookingStatus">Loading...</p>
          </div>
        </div>
      </div>

      <!-- Total Spent Card -->
      <div class="group bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-white relative overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative z-10">
          <div class="flex items-center justify-between mb-4">
            <div class="bg-white bg-opacity-20 p-3 rounded-xl backdrop-blur-sm float-animation" style="animation-delay: 0.2s">
              <span class="text-4xl">ğŸ’°</span>
            </div>
            <div class="text-right">
              <p class="text-green-100 text-sm font-semibold">Total Spent</p>
              <p class="text-4xl font-bold mt-1" id="totalSpent">â‚±0</p>
            </div>
          </div>
          <div class="pt-4 border-t border-white border-opacity-20">
            <p class="text-green-100 text-sm">Lifetime spending</p>
          </div>
        </div>
      </div>

      <!-- Upcoming Trips Card -->
      <div class="group bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-white relative overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
        <div class="relative z-10">
          <div class="flex items-center justify-between mb-4">
            <div class="bg-white bg-opacity-20 p-3 rounded-xl backdrop-blur-sm float-animation" style="animation-delay: 0.4s">
              <span class="text-4xl">ğŸ–ï¸</span>
            </div>
            <div class="text-right">
              <p class="text-purple-100 text-sm font-semibold">Upcoming Trips</p>
              <p class="text-4xl font-bold mt-1" id="upcomingTrips">0</p>
            </div>
          </div>
          <div class="pt-4 border-t border-white border-opacity-20">
            <p class="text-purple-100 text-sm" id="nextTrip">No upcoming trips</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions with Enhanced Cards -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-2xl font-bold text-gray-800 flex items-center">
          <span class="bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-2 rounded-lg mr-3">âš¡</span>
          Quick Actions
        </h3>
        <span class="text-sm text-gray-500">Choose an action below</span>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- New Booking -->
        <a href="/bookings/select" class="group relative bg-gradient-to-br from-blue-50 to-cyan-50 hover:from-blue-100 hover:to-cyan-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-blue-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-blue-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">ğŸ¨</span>
            </div>
            <svg class="w-6 h-6 text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">New Booking</h4>
          <p class="text-sm text-gray-600">Reserve your perfect getaway</p>
        </a>

        <!-- My Bookings -->
        <a href="/bookings" class="group relative bg-gradient-to-br from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-green-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-green-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">ğŸ“‹</span>
            </div>
            <svg class="w-6 h-6 text-green-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">My Bookings</h4>
          <p class="text-sm text-gray-600">View all reservations</p>
        </a>

        <!-- My Profile -->
        <a href="/profile" class="group relative bg-gradient-to-br from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-purple-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-purple-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">ğŸ‘¤</span>
            </div>
            <svg class="w-6 h-6 text-purple-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">My Profile</h4>
          <p class="text-sm text-gray-600">Update your information</p>
        </a>

        <!-- Feedback -->
        <a href="/feedback" class="group relative bg-gradient-to-br from-orange-50 to-yellow-50 hover:from-orange-100 hover:to-yellow-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-orange-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-orange-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">â­</span>
            </div>
            <svg class="w-6 h-6 text-orange-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">Feedback & Ratings</h4>
          <p class="text-sm text-gray-600">Share your experience</p>
        </a>

        <!-- Contact -->
        <a href="/contact" class="group relative bg-gradient-to-br from-pink-50 to-rose-50 hover:from-pink-100 hover:to-rose-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-pink-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-pink-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">ğŸ’¬</span>
            </div>
            <svg class="w-6 h-6 text-pink-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">Contact Us</h4>
          <p class="text-sm text-gray-600">Get support anytime</p>
        </a>

        <!-- Amenities -->
        <a href="/amenities" class="group relative bg-gradient-to-br from-teal-50 to-cyan-50 hover:from-teal-100 hover:to-cyan-100 rounded-xl p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-lg border-2 border-transparent hover:border-teal-300">
          <div class="flex items-start justify-between mb-3">
            <div class="bg-teal-600 text-white p-3 rounded-xl group-hover:scale-110 transition-transform">
              <span class="text-3xl">ğŸï¸</span>
            </div>
            <svg class="w-6 h-6 text-teal-600 opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </div>
          <h4 class="font-bold text-gray-800 text-lg mb-1">Resort Amenities</h4>
          <p class="text-sm text-gray-600">Explore our facilities</p>
        </a>
      </div>
    </div>

    <!-- Featured Amenities with Image Cards -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-2xl font-bold text-gray-800 flex items-center">
          <span class="bg-gradient-to-r from-teal-600 to-cyan-600 text-white p-2 rounded-lg mr-3">ğŸ–ï¸</span>
          Explore Our Amenities
        </h3>
        <a href="/amenities" class="text-blue-600 hover:text-blue-800 font-semibold flex items-center group">
          View All 
          <svg class="w-5 h-5 ml-1 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </a>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <a href="/amenities/floating-cottage" class="group relative overflow-hidden rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:scale-105">
          <div class="aspect-square bg-gradient-to-br from-blue-400 to-cyan-500 flex items-center justify-center">
            <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ›–</span>
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-4">
            <div class="text-white">
              <p class="font-bold text-lg">Floating Cottage</p>
              <p class="text-xs opacity-90">Relax on water â†’</p>
            </div>
          </div>
        </a>
        
        <a href="/amenities/beach-access" class="group relative overflow-hidden rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:scale-105">
          <div class="aspect-square bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center">
            <span class="text-6xl group-hover:scale-110 transition-transform">ğŸï¸</span>
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-4">
            <div class="text-white">
              <p class="font-bold text-lg">Tour Packages</p>
              <p class="text-xs opacity-90">Island hopping â†’</p>
            </div>
          </div>
        </a>
        
        <a href="/amenities/water-sports" class="group relative overflow-hidden rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:scale-105">
          <div class="aspect-square bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center">
            <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ£</span>
          </div>
          <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-4">
            <div class="text-white">
              <p class="font-bold text-lg">Water Activities</p>
              <p class="text-xs opacity-90">Adventure awaits â†’</p>
            </div>
          </div>
        </a>
      </div>
    </div>

    <!-- Resort Info with Enhanced Design -->
    <div class="relative bg-gradient-to-r from-cyan-600 via-blue-600 to-teal-600 rounded-2xl shadow-2xl p-8 text-white overflow-hidden">
      <div class="absolute inset-0 opacity-10">
        <div class="wave-pattern"></div>
      </div>
      <div class="relative z-10">
        <h3 class="text-2xl font-bold mb-6 flex items-center">
          <span class="bg-white bg-opacity-20 p-2 rounded-lg mr-3 backdrop-blur-sm">ğŸ“</span>
          Resort Information
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition">
            <p class="text-cyan-100 text-sm mb-2">ğŸ“ Location</p>
            <p class="font-bold text-lg">Barangay Balatasan, Bulalacao</p>
            <p class="text-sm mt-1">Oriental Mindoro, Philippines</p>
          </div>
          <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition">
            <p class="text-cyan-100 text-sm mb-2">ğŸ“ Contact</p>
            <p class="font-bold text-lg">+63 917 123 4567</p>
            <p class="text-sm mt-1">ğŸ“§ info@balatasan-resort.com</p>
          </div>
          <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 hover:bg-opacity-20 transition">
            <p class="text-cyan-100 text-sm mb-2">â° Operating Hours</p>
            <p class="font-bold text-lg">24/7 Reception</p>
            <p class="text-sm mt-1">Check-in: 2PM | Check-out: 12PM</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Load user booking stats
    async function loadUserStats() {
      try {
        const response = await fetch('/api/user/stats');
        const data = await response.json();
        
        if (data.success) {
          document.getElementById('totalBookings').textContent = data.totalBookings;
          document.getElementById('totalSpent').textContent = 'â‚±' + parseFloat(data.totalSpent || 0).toFixed(2);
          document.getElementById('upcomingTrips').textContent = data.upcomingTrips;
          
          if (data.totalBookings > 0) {
            document.getElementById('bookingStatus').textContent = `${data.confirmedBookings} confirmed`;
          } else {
            document.getElementById('bookingStatus').textContent = 'No active bookings';
          }
          
          if (data.nextTripDate) {
            document.getElementById('nextTrip').textContent = `Next: ${data.nextTripDate}`;
          }
        }
      } catch (error) {
        console.error('Error loading stats:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', loadUserStats);
  </script>
  </div>
  </div>
{{> footer }}